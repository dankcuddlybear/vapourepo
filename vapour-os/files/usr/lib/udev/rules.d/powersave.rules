# Enable runtime power management for PCI devices
ACTION=="add", SUBSYSTEM=="pci", ATTR{power/control}="auto"

# Suspend rotational HDDs after 5 minutes of inactivity
ACTION=="add|change", KERNEL=="sd[a-z]", ATTRS{queue/rotational}=="1", RUN+="/usr/bin/hdparm -B 127 -S 60 /dev/%k"
ACTION=="add|change", KERNEL=="hd[a-z]", ATTRS{queue/rotational}=="1", RUN+="/usr/bin/hdparm -B 127 -S 60 /dev/%k"

# SATA active link power management and runtime power management
ACTION=="add", SUBSYSTEM=="scsi_host", ATTR{power/control}="auto", ATTR{link_power_management_policy}="med_power_with_dipm"

# Enable runtime power management for all block devices except external optical drives
ACTION=="add|change", SUBSYSTEM=="block", KERNEL!="sr*", ATTR{power/control}="auto"
ACTION=="add|change", KERNEL=="sr*", ATTRS{removable}=="0", ATTR{power/control}="auto"
ACTION=="add|change", KERNEL=="sr*", ATTRS{removable}=="1", ATTR{power/control}="on"

